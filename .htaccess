# SECURITY BEGIN (Deny First, Then Allow)

Options -Indexes
# Do not allow the listing of directories by default

#<DirectoryMatch "/e/">
  # Require all denied
#</DirectoryMatch>
# Deny access to all server PHP based files. Causes error when accessing file via browser.
# Therefore, need to rewrite url to be outside of this directory.

<FilesMatch "xmlrpc.php|config|error|debug|changelog|readme|license">
  Require all denied
</FilesMatch>
# Do not allow access to files that may contain security vulnerabilities or sensitive information.

<FilesMatch "\.(log|htaccess|wpcli)$">
  # Require all denied
</FilesMatch>

<FilesMatch "\.(html|css|js|jpg|png|gif|pdf|ico|mp3|mp4|webm)$">
  Require all granted
</FilesMatch>
# Allow access to all html and media files, by default.

# SECURITY END

DirectoryIndex index.php default.html index.html

<IfModule mod_deflate.c>
  AddOutputFilterByType DEFLATE text/html text/css application/javascript image/x-icon
</IfModule>

<IfModule mod_headers.c>
  <FilesMatch "\.(html|jpg|png|gif|css|js|pdf|ico)$">
    Header set Cache-Control "max-age=86400, public, must-revalidate"
    Header unset ETag
    FileETag None
  </FilesMatch>
  AddCharset UTF-8 .html
</IfModule>

# Alias / /1

# BEGIN WordPress
<IfModule mod_rewrite.c>
  RewriteEngine On
  RewriteBase /
  RewriteRule ^index\.php$ - [L]
  # RewriteRule ^/admin/$ /e/core/wp-admin/ [L]
  RewriteCond %{REQUEST_FILENAME} !-f
  # RewriteCond %{REQUEST_FILENAME} !-d
  RewriteRule . /index.php [L]
</IfModule>

# END WordPress

# Copied/Pasted to wp-admin
# and RewriteCond %{REQUEST_FILENAME} !-d uncommented

ErrorDocument 401 /e/alt/code/401.html
ErrorDocument 403 /e/alt/code/403.html
ErrorDocument 404 /e/alt/code/404.html
ErrorDocument 500 /e/alt/code/500.html
ErrorDocument 503 /e/alt/code/503.html

# Use the Source, Luke!
# https://httpd.apache.org/docs/2.4/
# Choices minimized for optimization purposes.
# 86400 seconds = 1 day. 259200 = 3 days. 864000 = 10 days. Adjust as necessary.
